<div class="container" *ngIf="!loading">
  <div class="header">
    <button class="btn btn-back" (click)="goBack()">← Geri</button>
    <h1 *ngIf="patient">{{ patient.name }} {{ patient.surname }}</h1>
  </div>

  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>

  <div *ngIf="patient" class="detail-card">
    <div class="section">
      <h2>Hasta Bilgileri</h2>
      <div class="info-grid">
        <div class="info-item">
          <label>Ad:</label>
          <p>{{ patient.name }}</p>
        </div>
        <div class="info-item">
          <label>Soyadı:</label>
          <p>{{ patient.surname }}</p>
        </div>
        <div class="info-item">
          <label>Doğum Tarihi:</label>
          <p>{{ patient.birthDate | date: 'dd.MM.yyyy' }}</p>
        </div>
      </div>
    </div>

    <div class="section" *ngIf="prediction">
      <h2>AI Tahminlemesi</h2>
      <div class="prediction-box">
        <div class="prediction-item">
          <label>Risk Seviyesi:</label>
          <p class="prediction-value">{{ prediction.prediction }}</p>
        </div>
        <div class="prediction-item">
          <label>Güven Oranı:</label>
          <p class="prediction-value">{{ (prediction.confidence * 100).toFixed(2) }}%</p>
        </div>
      </div>
    </div>

    <div class="section" *ngIf="patient.records && patient.records.length > 0">
      <h2>Tıbbi Kayıtlar</h2>
      <div class="records-list">
        <div *ngFor="let record of patient.records" class="record-item">
          <div class="record-header">
            <span class="date">{{ record.date | date: 'dd.MM.yyyy HH:mm' }}</span>
          </div>
          <div class="record-content">
            <div class="record-field">
              <label>Tanı:</label>
              <p>{{ record.diagnosis }}</p>
            </div>
            <div class="record-field">
              <label>Doktor Notları:</label>
              <p>{{ record.doctorRemarks }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section" *ngIf="!patient.records || patient.records.length === 0">
      <p class="empty">Tıbbi kayıt bulunmamaktadır.</p>
    </div>
  </div>
</div>

<div class="container loading" *ngIf="loading">
  Yükleniyor...
</div>
